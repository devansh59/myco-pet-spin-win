<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Reward - Myco Pet</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #E8F4FF 0%, #FFFFFF 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .container {
      max-width: 600px;
      width: 100%;
      background: white;
      padding: 40px 30px;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 127, 255, 0.2);
      text-align: center;
    }
    
    h1 {
      color: #007FFF;
      font-size: 32px;
      margin-bottom: 10px;
      line-height: 1.3;
    }
    
    .greeting {
      font-size: 18px;
      color: #005099;
      margin-bottom: 30px;
      font-weight: 500;
    }
    
    /* Email Form */
    .email-form {
      background: #E8F4FF;
      padding: 30px;
      border-radius: 15px;
      margin: 20px 0;
    }
    
    .email-form h3 {
      color: #005099;
      margin-bottom: 15px;
      font-size: 20px;
    }
    
    .email-form input {
      width: 100%;
      padding: 15px;
      font-size: 16px;
      border: 2px solid #007FFF;
      border-radius: 10px;
      margin: 15px 0;
    }
    
    .email-form button {
      width: 100%;
      padding: 18px;
      background: #007FFF;
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .email-form button:hover {
      background: #005099;
      transform: translateY(-2px);
    }
    
    .reward-box {
      background: linear-gradient(135deg, #007FFF, #005099);
      color: white;
      padding: 40px 20px;
      border-radius: 15px;
      margin: 30px 0;
      box-shadow: 0 8px 25px rgba(0, 127, 255, 0.3);
    }
    
    .reward-label {
      font-size: 16px;
      opacity: 0.9;
      margin-bottom: 10px;
    }
    
    .reward-value {
      font-size: 48px;
      font-weight: bold;
      margin: 10px 0;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }
    
    .reward-emoji {
      font-size: 60px;
      margin-top: 10px;
    }
    
    .instructions {
      background: #E8F4FF;
      padding: 25px;
      border-radius: 12px;
      margin: 25px 0;
    }
    
    .instructions h3 {
      color: #005099;
      font-size: 20px;
      margin-bottom: 15px;
    }
    
    .steps {
      text-align: left;
      margin: 20px 0;
    }
    
    .step {
      display: flex;
      align-items: start;
      margin: 15px 0;
      padding: 15px;
      background: white;
      border-radius: 10px;
    }
    
    .step-number {
      background: #007FFF;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-right: 15px;
      flex-shrink: 0;
      font-size: 14px;
    }
    
    .step-text {
      color: #333;
      font-size: 15px;
      line-height: 1.5;
    }
    
    .btn {
      display: inline-block;
      padding: 18px 45px;
      background: #06d6a0;
      color: white;
      text-decoration: none;
      border-radius: 50px;
      font-size: 18px;
      font-weight: bold;
      margin: 20px 0;
      transition: all 0.3s;
      box-shadow: 0 6px 20px rgba(6, 214, 160, 0.4);
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(6, 214, 160, 0.5);
      background: #05c294;
    }
    
    .note {
      font-size: 14px;
      color: #666;
      margin-top: 25px;
      padding: 15px;
      background: #FFF9E6;
      border-radius: 8px;
      border-left: 4px solid #FFD93D;
      text-align: left;
    }
    
    .footer {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 2px solid #E8F4FF;
      color: #999;
      font-size: 13px;
    }
    
    .hidden {
      display: none;
    }
    
    @media (max-width: 600px) {
      .container {
        padding: 30px 20px;
      }
      
      h1 {
        font-size: 26px;
      }
      
      .reward-value {
        font-size: 36px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    
    <!-- Email Capture Form (shows first) -->
    <div id="emailCapture" class="email-form">
      <h1 style="color:#007FFF;margin-bottom:20px;">üéâ Congratulations!</h1>
      <h3>Enter your email to see your reward:</h3>
      <p style="color:#666;margin-bottom:15px;font-size:15px;">We'll send your discount code to this email after you review!</p>
      <form id="emailForm">
        <input type="email" id="emailInput" placeholder="your@email.com" required>
        <input type="text" id="nameInput" placeholder="Your Name (optional)">
        <button type="submit">üéÅ See My Reward</button>
      </form>
    </div>
    
    <!-- Reward Display (shows after email entered) -->
    <div id="rewardContent" class="hidden">
      <h1>üéâ Congratulations<span id="nameDisplay"></span>!</h1>
      
      <p class="greeting">You've won an amazing reward!</p>
      
      <div class="reward-box">
        <div class="reward-label">Your Prize:</div>
        <div class="reward-value" id="rewardDisplay">Loading...</div>
        <div class="reward-emoji" id="rewardEmoji">üéÅ</div>
      </div>
      
      <div class="instructions">
        <h3>üìù How to Claim Your Reward</h3>
        
        <div class="steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-text">Click the button below to leave a quick review</div>
          </div>
          
          <div class="step">
            <div class="step-number">2</div>
            <div class="step-text">Share your honest experience with Myco Pet products</div>
          </div>
          
          <div class="step">
            <div class="step-number">3</div>
            <div class="step-text">We'll email your discount code within 24 hours after verifying your review!</div>
          </div>
        </div>
      </div>
      
      <a href="https://myco.pet/products/gut-immunity#judgeme" id="reviewBtn" class="btn" target="_blank">‚≠ê Leave Review & Get Code</a>
      
      <div class="note">
        <strong>üí° Important:</strong> Your discount code will be sent to <strong id="emailDisplay">your email</strong> after we verify your review. Please check your inbox within 24 hours!
      </div>
      
      <div class="footer">
        <p>üçÑ Myco Pet - Unleash Vitality üíô</p>
        <p>¬© 2024 Myco Pet. All rights reserved.</p>
      </div>
    </div>
    
  </div>

  <script>
    // Get URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    let customerEmail = urlParams.get('email') || '';
    let customerName = urlParams.get('name') || '';
    const reward = urlParams.get('reward') || getRandomReward();
    
    // If email exists in URL, skip form
    if (customerEmail) {
      showReward();
    }
    
    // Handle form submission
    document.getElementById('emailForm').addEventListener('submit', function(e) {
      e.preventDefault();
      customerEmail = document.getElementById('emailInput').value;
      customerName = document.getElementById('nameInput').value || '';
      showReward();
    });
    
    function showReward() {
      document.getElementById('emailCapture').classList.add('hidden');
      document.getElementById('rewardContent').classList.remove('hidden');
      
      // Display customer name
      if (customerName) {
        document.getElementById('nameDisplay').textContent = ', ' + customerName;
      }
      
      // Display email
      document.getElementById('emailDisplay').textContent = customerEmail || 'your email';
      
      // Display reward
      document.getElementById('rewardDisplay').textContent = reward;
      
      // Set emoji
      const emojiMap = {
        '10% OFF': 'üéâ',
        '15% OFF': 'üéä',
        'Free Shipping': 'üöö',
        'Free Protect Spray': 'üß¥',
        'Buy 2 Get 1': 'üéÅ'
      };
      document.getElementById('rewardEmoji').textContent = emojiMap[reward] || 'üéÅ';
      
      // Log to Google Sheets
      logToGoogleSheets(customerEmail, customerName, reward);
    }
    
    function getRandomReward() {
      const rewards = ['10% OFF', 'Free Shipping', '15% OFF', 'Free Protect Spray', 'Buy 2 Get 1'];
      return rewards[Math.floor(Math.random() * rewards.length)];
    }
    
    function logToGoogleSheets(email, name, reward) {
      const scriptUrl = 'https://script.google.com/macros/s/AKfycbwX5QEtsGTinY9H7OSG-9PX5bnlhL9KkE72cKtwzE4fNEZDQTsU-qSUf-p2ccPLq-hS/exec';
      
      fetch(scriptUrl, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          timestamp: new Date().toLocaleString(),
          email: email,
          name: name,
          reward: reward
        })
      }).then(() => {
        console.log('‚úÖ Logged to Google Sheets');
      }).catch(err => {
        console.log('‚ö†Ô∏è Logging attempted');
      });
    }
  </script>
</body>
</html>
